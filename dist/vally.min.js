!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.vally={})}(this,function(e){"use strict";var n=Object.freeze({}),t=function(e){var n=e.node;return e.validators.reduce(function(e,t){if(!e.isValid)return e;var r=n.value;return{isValid:t.fn(r),node:n,validator:t}},{isValid:!0,node:n,validator:null})},r=function(e,n){return!!o(e)&&n.test(e)},i=function(e){return void 0===e||0===e.length},o=function(e){return"string"==typeof e},a=function(e){var n=e.fields.map(function(e){if(!e.node)return console.warn("vally, validate: passed node is undefined! Please check your field definitions."),{isValid:!1,node:e.node,validator:null};var n=null===e.node.offsetParent||"none"===e.node.style.display,r=e.node.required||!1,o=e.node.value,a=!r&&i(o);return n||a?{isValid:!0,node:e.node,validator:null}:t(e)});return{isValid:n.reduce(function(e,n){return e?n.isValid:e},!0),validations:n}};e.isEmail=function(e){return r(e,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)},e.isEmpty=i,e.isNoneEmptyString=function(e){return o(e)&&e.length>0},e.isNumberString=function(e){return r(e,/^\d+$/)},e.isString=o,e.validateNode=t,e.validate=a,e.initWithBindings=function(e,n,t){var r=e.fields,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.map(function(e){var r,o,d,u=(r=function(n){var r=a({fields:[e]});t(n,r)},o=i,d=void 0,function(){for(var e=this,n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];clearTimeout(d),d=setTimeout(function(){return r.apply(e,t)},o)});return e.node.addEventListener(n,u),function(){return e.node.removeEventListener(n,u)}})},e.createConfig=function(e){return{fields:e.reduce(function(e,n){var t=document.querySelector(n.selector);return t&&(t.mock||t instanceof HTMLInputElement||t instanceof HTMLSelectElement)?[].concat(function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}(e),[{node:t,validators:n.validators}]):(console.warn('vally, createConfig: node with selector "'+n.selector+'" could not be found!'),e)},[])}},e.types=n,Object.defineProperty(e,"__esModule",{value:!0})});
