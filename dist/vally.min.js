!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.vally={})}(this,function(n){"use strict";var e=function(n){var e=n.node;return n.validators.reduce(function(n,t){if(!n.isValid)return n;var r=e.value;return{isValid:t.fn(r),node:e,validator:t}},{isValid:!0,node:e,validator:null})},t=function(n,e){return!!i(n)&&e.test(n)},r=function(n){return function(n){return void 0===n}(n)||0===n.length},i=function(n){return"string"==typeof n},o=function(n){var t=n.fields.map(function(n){if(!n.node)return console.warn("vally, validate: passed node is undefined! Please check your field definitions."),{isValid:!1,node:n.node,validator:null};var t=null===n.node.offsetParent||"none"===n.node.style.display,i=n.node.required||!1,o=n.node.value,a=!i&&r(o);return t||a?{isValid:!0,node:n.node,validator:null}:e(n)});return{isValid:t.reduce(function(n,e){return n?e.isValid:n},!0),validations:t}},a=function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)};n.isEmail=function(n){return t(n,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)},n.isEmpty=r,n.isNoneEmptyString=function(n){return i(n)&&n.length>0},n.isNumberString=function(n){return t(n,/^\d+$/)},n.isString=i,n.validateNode=e,n.validate=o,n.initWithBindings=function(n,e,t){var r=n.fields,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.map(function(n){var r,a,u,d=(r=function(e){var r=o({fields:[n]});t(e,r)},a=i,u=void 0,function(){for(var n=this,e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];clearTimeout(u),u=setTimeout(function(){return r.apply(n,t)},a)});return n.node.addEventListener(e,d),function(){return n.node.removeEventListener(e,d)}})},n.createConfig=function(n){return{fields:n.reduce(function(n,e){var t=document.querySelector(e.selector);if(!t)return console.warn('vally, createConfig: node with selector "'+e.selector+'" could not be found!'),n;var r=t.mock,i=t instanceof HTMLInputElement||t instanceof HTMLSelectElement;return r||i?[].concat(a(n),[{node:t,validators:e.validators}]):(console.warn('vally, createConfig: node with selector "'+e.selector+'" is not a valid input/select Element!'),n)},[])}},n.flattenAndMerge=function(n){return function(n){return n.reduce(function(n,e,t,r){var i=e.node,o=0===t,u=o?r.slice(t+1):n.slice(t+1);if(!u.length)return n;var d=o?[]:n.slice(0,t),l=u.filter(function(n){return n.node===i}),c=[].concat(a(e.validators),a(l.reduce(function(n,e){return[].concat(a(n),a(e.validators))},[]))),f=u.filter(function(n){return n.node!==i});return[].concat(a(d),[{node:i,validators:c}],a(f))},[])}(n.reduce(function(n,e){var t=e.nodeDef;if(t instanceof Array){var r=t.map(function(n){return{node:n,validators:e.validators}});return[].concat(a(n),a(r))}return[].concat(a(n),[{node:t,validators:e.validators}])},[]))},Object.defineProperty(n,"__esModule",{value:!0})});
